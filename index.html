<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<title>Basic Chatroom</title>
		<script src="/socket.io/socket.io.js"></script>
	</head>
	<body>
		<div id="container">
			<div id="messages"></div>
			<p contenteditable id="input"></p>
		</div>
		<script>

let socket = io();

let username = prompt("Enter a username: ");

let messageBox = document.querySelector("#messages");
let inputBox = document.querySelector("#input");
inputBox.onkeydown = (event)=>{
	if(event.which === 13 || event.charCode === 13){
		let message = inputBox.innerText;
		inputBox.innerText = "";
		socket.emit('message_sent', {
			username: username,
			body: message
		});
	}
}

socket.on('message_approved', (message)=>{
	messageBox.innerHTML += message+'<br />'
});

		</script>
	</body>
</html>
